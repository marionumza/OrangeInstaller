#encoding: utf-8
# Julio 2008 - Martin Salcedo
from OpenOrange import *

ParentItemCostWindow = SuperClass("ItemCostWindow","MasterWindow",__file__)
class ItemCostWindow(ParentItemCostWindow):

    def showCostHistory(self):
        record = self.getRecord()
        from ItemCostHistory import ItemCostHistory
        report = ItemCostHistory()
        report.defaults()
        report.getRecord().Item = record.Code
        report.getRecord().CostMethod= record.UpdateCost
        report.open(False)

    def afterEdit(self, fname):
        ParentItemCostWindow.afterEdit(self, fname)
        if (fname == "SubCost"):
            record = self.getRecord()
            record.updateCurrentCost()
            
    def beforeInsertRow(self, detailfieldname, rownr):
        res = ParentItemCostWindow.beforeInsertRow(self, detailfieldname, rownr)
        if detailfieldname == "StockCost":
            res = False
        return res
        
    def beforeDeleteRow(self, detailfieldname, rownr):
        res = ParentItemCostWindow.beforeDeleteRow(self, detailfieldname, rownr)
        if detailfieldname == "StockCost":
            res = False
        return res
        
    def beforeEditRow(self, detailfieldname, fieldname, rownr):
        res = ParentItemCostWindow.beforeEditRow(self, detailfieldname, fieldname, rownr)
        if detailfieldname == "StockCost":
            res = False
        return res
